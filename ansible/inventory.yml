---
# Dual-user inventory structure
all:
  children:
    vps:
      hosts:
        auberge-old:
          ansible_host: "{{ lookup('env', 'AUBERGE_OLD_HOST') }}"
          ansible_port: "{{ lookup('env', 'SSH_PORT') }}"
          bootstrap_user: root
        auberge:
          ansible_host: "{{ lookup('env', 'AUBERGE_HOST') }}"
          ansible_port: "{{ lookup('env', 'SSH_PORT') }}"
          bootstrap_user: root
        vibecoder:
          ansible_host: "{{ lookup('env', 'VIBECODER_HOST') }}"
          ansible_port: "{{ lookup('env', 'SSH_PORT') }}"
          bootstrap_user: debian
      vars:
        # Default to ansible automation user
        ansible_user: ansible
        ansible_ssh_private_key_file: "{{ lookup('env', 'HOME') }}/.ssh/identities/ansible_{{ inventory_hostname }}"

        # Your personal admin user (sourced from group_vars/all/main.yml)
        admin_ssh_private_key_file: "{{ lookup('env', 'HOME') }}/.ssh/identities/{{ admin_user_name }}_{{ inventory_hostname }}"

        # Common SSH settings
        ansible_python_interpreter: /usr/bin/python3
        ansible_ssh_pipelining: true
        ansible_ssh_common_args: >-
          -o ControlMaster=auto
          -o ControlPersist=60s
          -o UserKnownHostsFile={{ lookup('env', 'HOME') }}/.ssh/known_hosts
          -o StrictHostKeyChecking=accept-new
          -o IdentitiesOnly=yes
