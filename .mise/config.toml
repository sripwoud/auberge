# ansible-run is now a file task in .config/mise/tasks/

[tasks.ansible-check]
alias = "c"
description = "Dry run selected playbook on selected host"
run = """
host=$(mise run select-host)
playbook=$(mise run select-playbook)
ansible-playbook -i inventory.yml "$playbook" --check --ask-vault-pass --limit "$host"
"""

[tasks.fmt]
alias = "f"
description = "Format"
run = "dprint fmt -c .dprint.jsonc"
silent = true

[tasks.lint]
alias = "l"
run = "ansible-lint"
silent = true

[tasks.ssh]
run = ["rm -fr ~/.ssh", "command ssh root@194.164.53.11"]

[tools]
caddy = "latest"
"cargo:convco" = "latest"
dasel = "latest"
dprint = "latest"
hk = "latest"
pipx = "latest"
pkl = "latest"
shfmt = "latest"
ansible = "latest"
